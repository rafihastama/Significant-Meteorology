<!DOCTYPE html>
<html>
  <head>
    <title>RAW SIGMET WEB</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.7.1/dist/leaflet.css" />
    <link rel="stylesheet" href="/style.css" />
  </head>
  <body>
    <div id="map"></div>

    <h1>Chatbot Form</h1>

    <div id="chatbox"></div>

    <form id="chat-form">
      <label for="prompt">Prompt:</label>
      <input type="text" id="prompt" name="prompt" required><br>

      <label for="result">Result:</label>
      <input type="text" id="result" name="result" readonly><br>

      <input type="submit" value="Submit" id="submit-btn">
    </form>

    <script src="https://cdn.jsdelivr.net/npm/leaflet@1.7.1/dist/leaflet.js"></script>
    <script>
      const map = L.map('map').setView([-2.5489, 118.0149], 5);

      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors',
        maxZoom: 18,
      }).addTo(map);

      /*
       * WAAF SIGMET 51 VALID 012350/020550 WAAA- WAAF UJUNG PANDANG FIR
       * VA ERUPTION MT DUKONO PSN N0142 E12754 VA CLD OBS AT 2230Z
       * WI N0143 E12752 - N0139 E12829 - N0121 E12821 - N 0141 E12751 - N0143 E12752
       * SFC/FL080 MOV SE 15KT NC=
       *  */
      const certainAreaPolygon = L.polygon
      ([[1.72, 127.87], 
      [1.65, 127.87], 
      [1.35, 128.48], 
      [1.68, 128.35]], 
      { color: 'red' }).addTo(map);

      // Menambahkan event hover pada poligon
      certainAreaPolygon.on('click', function (e) {
        this.bindPopup("Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi imperdiet vestibulum lacus eu volutpat.").openPopup();
      });

      const form = document.getElementById("chat-form");
      const chatbox = document.getElementById("chatbox");
      const resultInput = document.getElementById("result");

      form.addEventListener("submit", function (event) {
        event.preventDefault();

        const promptInput = document.getElementById("prompt").value;
        const result = processPrompt(promptInput);

        const chatEntry = document.createElement("p");
        chatEntry.innerHTML = "<strong>Prompt:</strong> " + promptInput + "<br><strong>Result:</strong> " + result;
        chatbox.appendChild(chatEntry);

        resultInput.value = result;
        document.getElementById("prompt").value = "";
      });

      function processPrompt(prompt) {
        // logicnya disini
        return prompt;
      }
    </script>
  </body>
</html>
