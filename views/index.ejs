<!DOCTYPE html>
<html>
  <head>
    <title>RAW SIGMET WEB</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.7.1/dist/leaflet.css" />
    <link rel="stylesheet" href="/style.css" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Jost:wght@400;500;600;700&display=swap" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Public Sans:wght@800&display=swap" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Rubik:wght@500&display=swap" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" />
  </head>
  
  <body>

    <!-- Navbar -->
    <nav class ="navbar" id ="navbar">
      <div class="navbar-nav">
        <a href="#map">Significant Meteorology</a>
      </div>
    </nav>

    <!-- Content -->
    <div id="map"></div>

    <button id="chat-button">Chat Bot</button>

    <div id="chat-popup">
      <div class="header">
        <h1>Chatbot Form</h1>
        <button id="close-button">&times;</button>
      </div>
      <div class="content">
        <form id="chat-form">
          <label for="prompt">Prompt:</label>
          <input type="text" id="prompt" name="prompt" required><br>

          <label for="result">Result:</label>
          <input type="text" id="result" name="result" readonly><br>

          <input type="submit" value="Submit" id="submit-btn">
        </form>
      </div>
    </div>
  
    <!-- Footer -->
    <footer>
      <p><strong>Sentinels</strong> Supported by BMKG <img src="./Logo-BMKG.webp" alt="Logo BMKG"></p>
      <p id="sec">Â© 2023 Sentinels, All Rights Reserved</p> 
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/leaflet@1.7.1/dist/leaflet.js"></script>
    <script>
      const map = L.map('map', {
        attributionControl: false,
      }).setView([-2.5489, 118.0149], 5);

      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: false,
        maxZoom: 18,
      }).addTo(map);

      /*
       * WAAF SIGMET 51 VALID 012350/020550 WAAA- WAAF UJUNG PANDANG FIR
       * VA ERUPTION MT DUKONO PSN N0142 E12754 VA CLD OBS AT 2230Z
       * WI N0143 E12752 - N0139 E12829 - N0121 E12821 - N 0141 E12751 - N0143 E12752
       * SFC/FL080 MOV SE 15KT NC=
       *  */

       const certainAreaPolygon = L.polygon
      ([[1.72, 127.87], 
      [1.65, 127.87], 
      [1.35, 128.48], 
      [1.68, 128.35]], 
      { color: 'red' }).addTo(map);

      // Menambahkan event hover pada polygon
      certainAreaPolygon.on('mouseover', function (e) {
        this.bindPopup("Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi imperdiet vestibulum lacus eu volutpat.").openPopup();
      });

      const chatButton = document.getElementById("chat-button");
      const chatPopup = document.getElementById("chat-popup");
      const closeButton = document.getElementById("close-button");

      chatButton.addEventListener("click", function () {
        chatPopup.classList.add("active");
      });

      closeButton.addEventListener("click", function () {
        chatPopup.classList.remove("active");
      });
      
      const form = document.getElementById("chat-form");
      const resultInput = document.getElementById("result");

      form.addEventListener("submit", function (event) {
        event.preventDefault();

        const promptInput = document.getElementById("prompt").value;
        const result = processPrompt(promptInput);

        resultInput.value = result;
        document.getElementById("prompt").value = "";
      });

      function processPrompt(prompt) {
        return prompt;
      }
    </script>
  </body>
</html>
